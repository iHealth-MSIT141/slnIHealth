#pragma checksum "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "84ff699017af4571f09cd969c6c86ea34c343028"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Shopping_ShowShoppingMall), @"mvc.1.0.view", @"/Views/Shopping/ShowShoppingMall.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\ispan\GitHub\0801n6\prjIHealth\_ViewImports.cshtml"
using prjIHealth;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using Microsoft.EntityFrameworkCore;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using prjIHealth.Controllers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 273 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using prjIHealth.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 274 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using prjiHealth.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 275 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using prjIHealth.ViewModels;

#line default
#line hidden
#nullable disable
#nullable restore
#line 276 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using prjiHealth.ViewModels;

#line default
#line hidden
#nullable disable
#nullable restore
#line 277 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using Microsoft.AspNetCore.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 278 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using Microsoft.AspNetCore.Mvc;

#line default
#line hidden
#nullable disable
#nullable restore
#line 279 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using System.Linq;

#line default
#line hidden
#nullable disable
#nullable restore
#line 280 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using System.Text.Json;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"84ff699017af4571f09cd969c6c86ea34c343028", @"/Views/Shopping/ShowShoppingMall.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"a16e691bc2a8572590ef329eb9d410d52ff20929", @"/_ViewImports.cshtml")]
    public class Views_Shopping_ShowShoppingMall : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<IEnumerable<prjIHealth.ViewModels.CProductViewModel>>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("href", new global::Microsoft.AspNetCore.Html.HtmlString("~/Shopping/ShowShoppingMall"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("method", "post", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
            DefineSection("Styles", async() => {
                WriteLiteral("\r\n\r\n");
            }
            );
            WriteLiteral("<link rel=\"stylesheet\" href=\"/css/ShoppingMallCategory.css\" type=\"text/css\">\r\n");
            WriteLiteral("<section class=\"breadcrumb-section set-bg\" data-setbg=\"/img/product/banner_shop.png\" id=\"bannerTop\">\r\n    <div class=\"container\">\r\n        <div class=\"row\">\r\n            <div class=\"col-lg-12 text-center\">\r\n                <div class=\"breadcrumb__text\">\r\n");
            WriteLiteral("                    <h2 class=\"reveal_t1\">周邊商城</h2>\r\n                    <div class=\"breadcrumb__option reveal_t1\">\r\n                        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("a", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "84ff699017af4571f09cd969c6c86ea34c3430286421", async() => {
                WriteLiteral("Home");
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
                        <span>Shopping</span>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>


<section class=""product spad"">
    <div class=""container"">
        <div class=""row"">
            <div class=""col-lg-3 col-md-5"">
                <div class=""sidebar reveal_l1"">
                    <div class=""sidebar__item"">
                        <h4>商品類別</h4>
                        <ul id=""showByCatergory"" class=""header__menu"">
                            <li><a href=""#"" data-id=""0"" class=""categoryItem selectedCategory"">所有商品</a></li>
                            <li><a href=""#"" data-id=""1"" class=""categoryItem"">乳清蛋白</a></li>
                            <li><a href=""#"" data-id=""2"" class=""categoryItem"">健康食品</a></li>
                            <li><a href=""#"" data-id=""3"" class=""categoryItem"">運動用品</a></li>
                            <li><a href=""#"" data-id=""4"" class=""categoryItem"">男裝</a></li>
                            <li><a href=");
            WriteLiteral("\"#\" data-id=\"5\" class=\"categoryItem\">女裝</a></li>\r\n                        </ul>\r\n                        <br />\r\n");
            WriteLiteral(@"                        <br />
                        <div class=""sidebar__item"">
                            <div class=""latest-product__text"">
                                <h4>熱門商品</h4>
                                <div class=""latest-product__slider owl-carousel"">
                                    <div class=""latest-prdouct__slider__item"">
");
#nullable restore
#line 69 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                          
                                            IHealthContext dblIHealth = new IHealthContext();
                                            var top3PopularProduct = (from od in dblIHealth.TOrderDetails.Include(od => od.FProduct).ThenInclude(p => p.FCategory).AsEnumerable()
                                                                      where od.FProduct.FCategoryId == 1
                                                                      group od by new
                                                                      {
                                                                          od.FProductId,
                                                                          od.FProduct.FProductName,
                                                                          od.FProduct.FCoverImage,
                                                                          od.FProduct.FUnitprice
                                                                      }
                                                                      into g
                                                                      select new
                                                                      {
                                                                          Key = g.Key,
                                                                          Count = g.Sum(od => od.FQuantity),
                                                                          Photo = g.Key.FCoverImage,
                                                                          UnitPrice = g.Key.FUnitprice
                                                                      }).OrderByDescending(p => p.Count).Take(3).ToList();

                                            foreach (var item in top3PopularProduct)
                                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                <a");
            BeginWriteAttribute("href", " href=\"", 5450, "\"", 5505, 2);
            WriteAttributeValue("", 5457, "/Shopping/ShowProductDetail/", 5457, 28, true);
#nullable restore
#line 91 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 5485, item.Key.FProductId, 5485, 20, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"latest-product__item\">\r\n                                                    <div class=\"latest-product__item__pic\">\r\n                                                        <img");
            BeginWriteAttribute("src", " src=\"", 5691, "\"", 5731, 2);
            WriteAttributeValue("", 5697, "/img/product/", 5697, 13, true);
#nullable restore
#line 93 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 5710, item.Key.FCoverImage, 5710, 21, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("alt", " alt=\"", 5732, "\"", 5738, 0);
            EndWriteAttribute();
            WriteLiteral(" style=\"width:110px;height:110px\">\r\n                                                    </div>\r\n                                                    <div class=\"latest-product__item__text\">\r\n                                                        <h6>");
#nullable restore
#line 96 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                       Write(item.Key.FProductName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h6>\r\n                                                        <span>");
#nullable restore
#line 97 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                         Write(item.Key.FUnitprice.ToString("C0"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n                                                    </div>\r\n                                                </a>\r\n");
#nullable restore
#line 100 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                            }

                                        

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    </div>\r\n                                    <div class=\"latest-prdouct__slider__item\">\r\n");
#nullable restore
#line 105 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                          
                                            top3PopularProduct = (from od in dblIHealth.TOrderDetails.Include(od => od.FProduct).ThenInclude(p => p.FCategory).AsEnumerable()
                                                                  where od.FProduct.FCategoryId == 2
                                                                  group od by new
                                                                  {
                                                                      od.FProductId,
                                                                      od.FProduct.FProductName,
                                                                      od.FProduct.FCoverImage,
                                                                      od.FProduct.FUnitprice
                                                                  }
                                                                      into g
                                                                  select new
                                                                  {
                                                                      Key = g.Key,
                                                                      Count = g.Sum(od => od.FQuantity),
                                                                      Photo = g.Key.FCoverImage,
                                                                      UnitPrice = g.Key.FUnitprice
                                                                  }).OrderByDescending(p => p.Count).Take(3).ToList();

                                            foreach (var item in top3PopularProduct)
                                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                <a");
            BeginWriteAttribute("href", " href=\"", 8287, "\"", 8342, 2);
            WriteAttributeValue("", 8294, "/Shopping/ShowProductDetail/", 8294, 28, true);
#nullable restore
#line 126 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 8322, item.Key.FProductId, 8322, 20, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"latest-product__item\">\r\n                                                    <div class=\"latest-product__item__pic\">\r\n                                                        <img");
            BeginWriteAttribute("src", " src=\"", 8528, "\"", 8568, 2);
            WriteAttributeValue("", 8534, "/img/product/", 8534, 13, true);
#nullable restore
#line 128 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 8547, item.Key.FCoverImage, 8547, 21, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("alt", " alt=\"", 8569, "\"", 8575, 0);
            EndWriteAttribute();
            WriteLiteral(" style=\"width:110px;height:110px\">\r\n                                                    </div>\r\n                                                    <div class=\"latest-product__item__text\">\r\n                                                        <h6>");
#nullable restore
#line 131 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                       Write(item.Key.FProductName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h6>\r\n                                                        <span>");
#nullable restore
#line 132 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                         Write(item.Key.FUnitprice.ToString("C0"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n                                                    </div>\r\n                                                </a>\r\n");
#nullable restore
#line 135 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                            }
                                        

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    </div>\r\n                                    <div class=\"latest-prdouct__slider__item\">\r\n");
#nullable restore
#line 139 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                          
                                            top3PopularProduct = (from od in dblIHealth.TOrderDetails.Include(od => od.FProduct).ThenInclude(p => p.FCategory).AsEnumerable()
                                                                  where od.FProduct.FCategoryId == 3
                                                                  group od by new
                                                                  {
                                                                      od.FProductId,
                                                                      od.FProduct.FProductName,
                                                                      od.FProduct.FCoverImage,
                                                                      od.FProduct.FUnitprice
                                                                  }
                                                                      into g
                                                                  select new
                                                                  {
                                                                      Key = g.Key,
                                                                      Count = g.Sum(od => od.FQuantity),
                                                                      Photo = g.Key.FCoverImage,
                                                                      UnitPrice = g.Key.FUnitprice
                                                                  }).OrderByDescending(p => p.Count).Take(3).ToList();

                                            foreach (var item in top3PopularProduct)
                                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                <a");
            BeginWriteAttribute("href", " href=\"", 11122, "\"", 11177, 2);
            WriteAttributeValue("", 11129, "/Shopping/ShowProductDetail/", 11129, 28, true);
#nullable restore
#line 160 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 11157, item.Key.FProductId, 11157, 20, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"latest-product__item\">\r\n                                                    <div class=\"latest-product__item__pic\">\r\n                                                        <img");
            BeginWriteAttribute("src", " src=\"", 11363, "\"", 11403, 2);
            WriteAttributeValue("", 11369, "/img/product/", 11369, 13, true);
#nullable restore
#line 162 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 11382, item.Key.FCoverImage, 11382, 21, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("alt", " alt=\"", 11404, "\"", 11410, 0);
            EndWriteAttribute();
            WriteLiteral(" style=\"width:110px;height:110px\">\r\n                                                    </div>\r\n                                                    <div class=\"latest-product__item__text\">\r\n                                                        <h6>");
#nullable restore
#line 165 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                       Write(item.Key.FProductName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h6>\r\n                                                        <span>");
#nullable restore
#line 166 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                         Write(item.Key.FUnitprice.ToString("C0"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n                                                    </div>\r\n                                                </a>\r\n");
#nullable restore
#line 169 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                            }
                                        

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    </div>\r\n                                    <div class=\"latest-prdouct__slider__item\">\r\n");
#nullable restore
#line 173 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                          
                                            top3PopularProduct = (from od in dblIHealth.TOrderDetails.Include(od => od.FProduct).ThenInclude(p => p.FCategory).AsEnumerable()
                                                                  where od.FProduct.FCategoryId == 4
                                                                  group od by new
                                                                  {
                                                                      od.FProductId,
                                                                      od.FProduct.FProductName,
                                                                      od.FProduct.FCoverImage,
                                                                      od.FProduct.FUnitprice
                                                                  }
                                                                      into g
                                                                  select new
                                                                  {
                                                                      Key = g.Key,
                                                                      Count = g.Sum(od => od.FQuantity),
                                                                      Photo = g.Key.FCoverImage,
                                                                      UnitPrice = g.Key.FUnitprice
                                                                  }).OrderByDescending(p => p.Count).Take(3).ToList();

                                            foreach (var item in top3PopularProduct)
                                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                <a");
            BeginWriteAttribute("href", " href=\"", 13957, "\"", 14012, 2);
            WriteAttributeValue("", 13964, "/Shopping/ShowProductDetail/", 13964, 28, true);
#nullable restore
#line 194 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 13992, item.Key.FProductId, 13992, 20, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"latest-product__item\">\r\n                                                    <div class=\"latest-product__item__pic\">\r\n                                                        <img");
            BeginWriteAttribute("src", " src=\"", 14198, "\"", 14238, 2);
            WriteAttributeValue("", 14204, "/img/product/", 14204, 13, true);
#nullable restore
#line 196 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 14217, item.Key.FCoverImage, 14217, 21, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("alt", " alt=\"", 14239, "\"", 14245, 0);
            EndWriteAttribute();
            WriteLiteral(" style=\"width:110px;height:110px\">\r\n                                                    </div>\r\n                                                    <div class=\"latest-product__item__text\">\r\n                                                        <h6>");
#nullable restore
#line 199 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                       Write(item.Key.FProductName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h6>\r\n                                                        <span>");
#nullable restore
#line 200 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                         Write(item.Key.FUnitprice.ToString("C0"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n                                                    </div>\r\n                                                </a>\r\n");
#nullable restore
#line 203 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                            }
                                        

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    </div>\r\n                                    <div class=\"latest-prdouct__slider__item\">\r\n");
#nullable restore
#line 207 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                          
                                            top3PopularProduct = (from od in dblIHealth.TOrderDetails.Include(od => od.FProduct).ThenInclude(p => p.FCategory).AsEnumerable()
                                                                  where od.FProduct.FCategoryId == 5
                                                                  group od by new
                                                                  {
                                                                      od.FProductId,
                                                                      od.FProduct.FProductName,
                                                                      od.FProduct.FCoverImage,
                                                                      od.FProduct.FUnitprice
                                                                  }
                                                                      into g
                                                                  select new
                                                                  {
                                                                      Key = g.Key,
                                                                      Count = g.Sum(od => od.FQuantity),
                                                                      Photo = g.Key.FCoverImage,
                                                                      UnitPrice = g.Key.FUnitprice
                                                                  }).OrderByDescending(p => p.Count).Take(3).ToList();

                                            foreach (var item in top3PopularProduct)
                                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                <a");
            BeginWriteAttribute("href", " href=\"", 16792, "\"", 16847, 2);
            WriteAttributeValue("", 16799, "/Shopping/ShowProductDetail/", 16799, 28, true);
#nullable restore
#line 228 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 16827, item.Key.FProductId, 16827, 20, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"latest-product__item\">\r\n                                                    <div class=\"latest-product__item__pic\">\r\n                                                        <img");
            BeginWriteAttribute("src", " src=\"", 17033, "\"", 17073, 2);
            WriteAttributeValue("", 17039, "/img/product/", 17039, 13, true);
#nullable restore
#line 230 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 17052, item.Key.FCoverImage, 17052, 21, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("alt", " alt=\"", 17074, "\"", 17080, 0);
            EndWriteAttribute();
            WriteLiteral(" style=\"width:110px;height:110px\">\r\n                                                    </div>\r\n                                                    <div class=\"latest-product__item__text\">\r\n                                                        <h6>");
#nullable restore
#line 233 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                       Write(item.Key.FProductName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h6>\r\n                                                        <span>");
#nullable restore
#line 234 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                         Write(item.Key.FUnitprice.ToString("C0"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n                                                    </div>\r\n                                                </a>\r\n");
#nullable restore
#line 237 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                            }
                                        

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class=""col-lg-9 col-md-7"">
                <div class=""hero__search"">
                    <button type=""button"" class=""hero__search__form site-btn sort"" data-sort="""" style=""width:20%"">按價格排序</button>
                    <div class=""hero__search__form "" style=""width:57.3%"" id=""search"">
                        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "84ff699017af4571f09cd969c6c86ea34c34302832962", async() => {
                WriteLiteral(@"
                            <input style=""width:392.1px;height:46px"" id=""txtKeyword"" name=""txtKeyword"" type=""text"" placeholder=""請輸入關鍵字"" autocomplete=""off"">
                            <button type=""button"" class=""site-btn"" id=""btnSearch"" style=""float:right"">搜尋</button>
                        ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Method = (string)__tagHelperAttribute_1.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
                    </div>
                </div>
                <div class=""row reveal_b2"" id=""showProduct"">

                </div>
                <div class=""product__pagination"">


                </div>
            </div>
        </div>
    </div>

</section>

");
            DefineSection("Scripts", async() => {
                WriteLiteral("\r\n\r\n    <script src=\"//cdn.jsdelivr.net/npm/sweetalert2@11\"></script>\r\n    <script>\r\n");
                WriteLiteral("\r\n");
#nullable restore
#line 282 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
      
        string LoginbuttonValue = "登入";
        int loginId = 0;
        TMember loginMember = null;

        if (Context.Session.Keys.Contains(CDictionary.SK_Logined_User))
        {
            string logJson = Context.Session.GetString(CDictionary.SK_Logined_User);
            loginMember = JsonSerializer.Deserialize<TMember>(logJson);
            LoginbuttonValue = loginMember.FMemberName;
            loginId = loginMember.FMemberId;
        };
    

#line default
#line hidden
#nullable disable
                WriteLiteral(@"
        let option = {
            categoryID: 0,
            sort: """",
            url: """",
            page: 1,
            txtKeyword: """"
            //minPrice:50,
            //maxPrice:5000
        }
        
        //js轉換數字為千分位型態方法
        function toCurrency(num) {
            var parts = num.toString().split('.');
            parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            return parts.join('.');
        }
        //$("".productitem"").slice((index-1)*9,index*9).show
        //顯示商品
        AllProducts(option);
        function AllProducts(option) {
            let url = """);
#nullable restore
#line 316 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                  Write(Url.Content("~/Shopping/GetProduct/"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""" + (option.categoryID == 0 ? """" : option.categoryID);
            $.post(url,option, function (datas) {
                let htmlShowProduct = """";
                $.each(datas, function (idx, product) {
                    product.fUnitprice = ""NT$"" + toCurrency(product.fUnitprice);
                    htmlShowProduct += `<div class=""col-lg-4 col-md-6 col-sm-6 productitem "" ><div class=""reveal_b2"" id=""header"" style=""cursor:pointer;"">
                                <div class=""product__item"">
                                <div class=""product__item__pic set-bg"" data-setbg=""/img/product/${product.fCoverImage}"" style=""background-image: url(&quot;/img/product/${product.fCoverImage}&quot;);"">
                                    <ul class=""product__item__pic__hover"">
                                        <li><a href=""#"" data-id=""${product.fProductId}"" class=""addToTrack""><i class=""fa fa-heart""></i></a></li>
                                        <li><a href=""#"" data-id=""${product.fProductId}"" class=""a");
                WriteLiteral(@"ddToCart""><i class=""fa fa-shopping-cart""></i></a></li>
                                    </ul>
                                </div>
                                <div class=""product__item__text"">
                                    <h6 class=""showProductDetail"" data-id=""${product.fProductId}"">${product.fProductName}</h6>
                                    <h5 class=""showProductDetail"" data-id=""${product.fProductId}"">${product.fUnitprice}</h5>
                                </div>
                            </div>
                            </div></div>`
                })
                $(""#showProduct"").html(htmlShowProduct);

                //頁碼動態生成，一開始只顯示前9個商品
                $("".productitem"").hide();
                let XNum = 0;
                let YNum = 9;
                $("".productitem"").slice(XNum, YNum).show();
                let productCount = $("".productitem"").length;
                let pageNum = """";
                let page = productCount / 9;
                if");
                WriteLiteral(@" (page % 9 != 0) {
                    page = page + 1;
                }
                for (let i = 1; i < page; i++) {
                    if (i == 1) {
                        pageNum = `<a href=""#"" class=""pageSelect selectedPage"">${i}</a>`;
                    }
                    else {
                        pageNum += `<a href=""#"" class=""pageSelect"">${i}</a>`;
                    }
                    
                }
                $("".product__pagination"").html(pageNum);

                //點頁數會跳至相對頁數產品
                $("".pageSelect"").click(function () {
                    let newPageNum = $(this).text();
                    $(this).addClass(""selectedPage"").siblings().removeClass(""selectedPage"");
                    $("".productitem"").hide();
                    XNum = (newPageNum - 1)*9;
                    YNum = newPageNum*9;
                    $("".productitem"").slice(XNum, YNum).show();
                    $('html,body').animate({ scrollTop: 10 }, 'slow');
         ");
                WriteLiteral(@"       })

                if ($("".productitem"").length == 0) {
                    SwalGreen.fire({
                    title: '查無搜尋結果',
                    text: '請重新搜尋或選擇篩選條件。',
                    icon: 'error',
                        confirmButtonText: '返回商城主頁',
                    showCloseButton: true
                }).then((result) => {
                    if (result.isConfirmed)
                        $(location).prop(""href"", """);
#nullable restore
#line 380 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                             Write(Url.Content("~/Shopping/ShowShoppingMall"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""");
                })
                }
            })
        }

        $("".amount"").on(""change"", function () {
            console.log(""text"");
            let minPrice = $(""#minamount"").text();
            let maxPrice = $(""#maxamount"").text();
            option.minPrice = minPrice;
            option.maxPrice = maxPrice;
            AllProducts(option);
        })



        //按價格排序
        //class改變箭頭方向
        //以data-sort的值傳去後端做IF/ELSE判斷
        $("".sort"").on(""click"", sorting);
        function sorting() {
            //以data-sort當flag
            let dataSort = $("".sort"").attr(""data-sort"");
            //每次執行function清空sort以外class
            $("".sort"").removeClass(""sort-asc sort-desc"");
            if (dataSort == null || dataSort == """") {
                dataSort = ""asc"";
                $("".sort"").addClass(""sort-asc"");
                $("".sort"").attr(""data-sort"", dataSort);
            }
            else if (dataSort == ""desc"") {
                dataSort = ""asc"";//");
                WriteLiteral(@"改變旗標
                $("".sort"").addClass(""sort-asc"");
                $("".sort"").attr(""data-sort"", dataSort);
            }
            else {
                dataSort = ""desc"";
                $("".sort"").addClass(""sort-desc"");
                $("".sort"").attr(""data-sort"", dataSort);
            }
            option.sort = dataSort;
            AllProducts(option);
        }

        //以類別分類各產品
        $(""#showByCatergory"").find("".categoryItem"").click(function (event) {
            event.preventDefault();
            id = $(this).attr(""data-id"");
            console.log(this);
            //清空txtKeyword，斷除2姐關係
            option.txtKeyword = """";
            $(""#txtKeyword"").val("""");
            option.categoryID = id;
            AllProducts(option);
        })
        $("".categoryItem"").click(function () {
            $("".categoryItem"").removeClass(""selectedCategory"");
            $(this).addClass(""selectedCategory"");
        })

         //以輸入文字搜產品
        $(""#btnSearch"").click(");
                WriteLiteral(@"function () {
            let keyword = $(""#txtKeyword"").val();
            //清空categoryID，斷除2姐關係
            option.categoryID = 0;
            option.txtKeyword = keyword;
            $("".categoryItem"").removeClass(""selectedCategory"");
            AllProducts(option);
            if (keyword == """") {
                SwalGreen.fire({
                    title: ""請輸入搜尋資料"",
                    text: false,
                    icon: 'question',
                    confirmButtonText: '返回商城主頁',
                    showCloseButton: true
                }).then((result) => {
                    if (result.isConfirmed)
                        $(location).prop(""href"", """);
#nullable restore
#line 458 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                             Write(Url.Content("~/Shopping/ShowShoppingMall"));

#line default
#line hidden
#nullable disable
                WriteLiteral("\");\r\n                })\r\n            }\r\n        })\r\n\r\n        showProduct();\r\n        //在商城主頁執行所有function\r\n        function showProduct() {\r\n            option.url = \"");
#nullable restore
#line 466 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                     Write(Url.Content("~/Shopping/ShowProduct"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""";
            AllProducts(option);
            //按品名會彈出相對應商品明細
            $(""#showProduct"").delegate("".showProductDetail"", ""click"", function () {
            id = $(this).attr(""data-id"");
            location.href = `/Shopping/ShowProductDetail/${id}`;
            showProductDetail(id);
            })
            async function showProductDetail(id) {
            var data = {};
            data.FProductId = id;
            data.FProductName = 1;
            $.ajax({ type: ""POST"", url: """);
#nullable restore
#line 478 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                    Write(Url.Action("ShowProductDetail"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""",data:data });
            }

            //按心心會加入追蹤清單
            $(""#showProduct"").delegate("".addToTrack"", ""click"", function (event) {
                event.preventDefault();              
                id = $(this).attr(""data-id"");
                if (");
#nullable restore
#line 485 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
               Write(loginId);

#line default
#line hidden
#nullable disable
                WriteLiteral(@"== 0) {
                    pleaseLogin();
                }
                else {
                    $(""#fa-heart"").children(""span"").show();
                    SwalGreen.fire({
                        title: '已成功加入追蹤清單',
                        text: false,
                        icon: 'success',
                        confirmButtonText: '確認',
                        showCloseButton: true
                    })
                     addTrack(id);
                 }

            })
            async function addTrack(id) {
            url = """);
#nullable restore
#line 502 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
              Write(Url.Content("~/Shopping/AddToTrack/"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""" + id;
            let response = await fetch(url);
            let datas = await response.json();
            console.log(datas);
            //變更右上追蹤清單顯示數量
            $(""#fa-heart"").children(""span"").text(datas);
            }

            //按購物車會加入到購物車
            $(""#showProduct"").delegate("".addToCart"", ""click"", function (event) {
            event.preventDefault();
            id = $(this).attr(""data-id"");
            if (");
#nullable restore
#line 514 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
           Write(loginId);

#line default
#line hidden
#nullable disable
                WriteLiteral(@" == 0) {
            pleaseLogin();
            }
            else {
                addCart(id);
                $(""#fa-cart"").children(""span"").show();
            SwalGreen.fire({
                    title: '已成功加入購物車',
                    text: false,
                    icon: 'success',
                        confirmButtonText: '確認',
                    showCloseButton: true
                })
            }

            })
            async function addCart(id) {
            //傳值回AddToCartViewModel
            var data = {};
            data.txtFid = id;
            data.txtCount = 1;
            data.discountValue = 0;
            data.discountID = 10;
            //變更右上購物車顯示數量
            await $.ajax({ type: ""POST"", url: """);
#nullable restore
#line 538 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                          Write(Url.Action("ShowProductDetail"));

#line default
#line hidden
#nullable disable
                WriteLiteral("\", data: data });\r\n            url = \"");
#nullable restore
#line 539 "C:\ispan\GitHub\0801n6\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
              Write(Url.Content("~/Shopping/ShowCartCount/"));

#line default
#line hidden
#nullable disable
                WriteLiteral("\"\r\n            let response = await fetch(url);\r\n            let datas = await response.json();\r\n            await $(\"#fa-cart\").children(\"span\").text(datas);\r\n            }\r\n\r\n");
                WriteLiteral("            }\r\n    </script>\r\n");
            }
            );
            WriteLiteral("\r\n");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<IEnumerable<prjIHealth.ViewModels.CProductViewModel>> Html { get; private set; }
    }
}
#pragma warning restore 1591
