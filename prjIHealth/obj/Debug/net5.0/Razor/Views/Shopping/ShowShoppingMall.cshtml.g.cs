#pragma checksum "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "17cda22f2b6ba3f7298751146d2739104c21b11c"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Shopping_ShowShoppingMall), @"mvc.1.0.view", @"/Views/Shopping/ShowShoppingMall.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\ispan\0808\prjIHealth\_ViewImports.cshtml"
using prjIHealth;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using Microsoft.EntityFrameworkCore;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using prjIHealth.Controllers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 272 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using prjIHealth.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 273 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using prjiHealth.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 274 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using prjIHealth.ViewModels;

#line default
#line hidden
#nullable disable
#nullable restore
#line 275 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using prjiHealth.ViewModels;

#line default
#line hidden
#nullable disable
#nullable restore
#line 276 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using Microsoft.AspNetCore.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 277 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using Microsoft.AspNetCore.Mvc;

#line default
#line hidden
#nullable disable
#nullable restore
#line 278 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using System.Linq;

#line default
#line hidden
#nullable disable
#nullable restore
#line 279 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
using System.Text.Json;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"17cda22f2b6ba3f7298751146d2739104c21b11c", @"/Views/Shopping/ShowShoppingMall.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"a16e691bc2a8572590ef329eb9d410d52ff20929", @"/_ViewImports.cshtml")]
    public class Views_Shopping_ShowShoppingMall : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<IEnumerable<prjIHealth.ViewModels.CProductViewModel>>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("href", new global::Microsoft.AspNetCore.Html.HtmlString("~/Shopping/ShowShoppingMall"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("btn btn-dark"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("href", new global::Microsoft.AspNetCore.Html.HtmlString("~/Shopping/DEMO"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("method", "post", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
            DefineSection("Styles", async() => {
                WriteLiteral(@"
    <style>
        .categoryItem {
            -webkit-transition: all, 0.3s;
            -moz-transition: all, 0.3s;
            -ms-transition: all, 0.3s;
            -o-transition: all, 0.3s;
            transition: all, 0.3s;
        }
    </style>
");
            }
            );
            WriteLiteral("<link rel=\"stylesheet\" href=\"/css/ShoppingMallCategory.css\" type=\"text/css\">\r\n");
            WriteLiteral("<section class=\"breadcrumb-section set-bg\" data-setbg=\"/img/product/banner_shop.png\" id=\"bannerTop\">\r\n    <div class=\"container\">\r\n        <div class=\"row\">\r\n            <div class=\"col-lg-12 text-center\">\r\n                <div class=\"breadcrumb__text\">\r\n");
            WriteLiteral("                    <h2 class=\"reveal_t1\">周邊商城</h2>\r\n                    <div class=\"breadcrumb__option reveal_t1\">\r\n                        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("a", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "17cda22f2b6ba3f7298751146d2739104c21b11c7277", async() => {
                WriteLiteral("Home");
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
                        <span>Shopping</span>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>


<section class=""product spad"">
    <div class=""container"">
        <div class=""row"">
            <div class=""col-lg-3 col-md-5"">
                <div class=""sidebar reveal_l1"">
                    <div class=""sidebar__item"">
                        <h4>商品類別</h4>
                        <ul id=""showByCatergory"" class=""header__menu"">
");
#nullable restore
#line 45 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                              
                                IHealthContext dblIHealth = new IHealthContext();

#line default
#line hidden
#nullable disable
            WriteLiteral("                                <li><a href=\"#\" data-id=\"0\" class=\"categoryItem selectedCategory\">所有商品 (");
#nullable restore
#line 47 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                                                                   Write(dblIHealth.TProducts.Count());

#line default
#line hidden
#nullable disable
            WriteLiteral(")</a></li>\r\n");
#nullable restore
#line 48 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                var categories = dblIHealth.TProductCategories.ToList();
                                foreach (var item in categories)
                                {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    <li><a href=\"#\" data-id=\"");
#nullable restore
#line 51 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                        Write(item.FCategoryId);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" class=\"categoryItem\">");
#nullable restore
#line 51 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                                                                Write(item.FCategoryName);

#line default
#line hidden
#nullable disable
            WriteLiteral(" (");
#nullable restore
#line 51 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                                                                                     Write(dblIHealth.TProducts.Where(ca => ca.FCategoryId == item.FCategoryId).Count());

#line default
#line hidden
#nullable disable
            WriteLiteral(")</a></li>\r\n");
#nullable restore
#line 52 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                }

                            

#line default
#line hidden
#nullable disable
            WriteLiteral("                        </ul>\r\n                        <br />                      \r\n                        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("a", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "17cda22f2b6ba3f7298751146d2739104c21b11c11366", async() => {
                WriteLiteral("DEMO");
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
                        <br /><br />
                        <div class=""sidebar__item"">
                            <div class=""latest-product__text"">
                                <h4>熱門商品</h4>
                                <div class=""latest-product__slider owl-carousel"">
                                    <div class=""latest-prdouct__slider__item"">
");
#nullable restore
#line 64 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                          
                                            dblIHealth = new IHealthContext();
                                            var top3PopularProduct = (from od in dblIHealth.TOrderDetails.Include(od => od.FProduct).ThenInclude(p => p.FCategory).AsEnumerable()
                                                                      where od.FProduct.FCategoryId == 1
                                                                      group od by new
                                                                      {
                                                                          od.FProductId,
                                                                          od.FProduct.FProductName,
                                                                          od.FProduct.FCoverImage,
                                                                          od.FProduct.FUnitprice
                                                                      }
                                                                      into g
                                                                      select new
                                                                      {
                                                                          Key = g.Key,
                                                                          Count = g.Sum(od => od.FQuantity),
                                                                          Photo = g.Key.FCoverImage,
                                                                          UnitPrice = g.Key.FUnitprice
                                                                      }).OrderByDescending(p => p.Count).Take(3).ToList();

                                            foreach (var item in top3PopularProduct)
                                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                <a");
            BeginWriteAttribute("href", " href=\"", 4753, "\"", 4808, 2);
            WriteAttributeValue("", 4760, "/Shopping/ShowProductDetail/", 4760, 28, true);
#nullable restore
#line 86 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 4788, item.Key.FProductId, 4788, 20, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"latest-product__item\">\r\n                                                    <div class=\"latest-product__item__pic\">\r\n                                                        <img");
            BeginWriteAttribute("src", " src=\"", 4994, "\"", 5034, 2);
            WriteAttributeValue("", 5000, "/img/product/", 5000, 13, true);
#nullable restore
#line 88 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 5013, item.Key.FCoverImage, 5013, 21, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("alt", " alt=\"", 5035, "\"", 5041, 0);
            EndWriteAttribute();
            WriteLiteral(" style=\"width:110px;height:110px\">\r\n                                                    </div>\r\n                                                    <div class=\"latest-product__item__text\">\r\n                                                        <h6>");
#nullable restore
#line 91 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                       Write(item.Key.FProductName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h6>\r\n                                                        <span>");
#nullable restore
#line 92 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                         Write(item.Key.FUnitprice.ToString("C0"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n                                                    </div>\r\n                                                </a>\r\n");
#nullable restore
#line 95 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                            }

                                        

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    </div>\r\n                                    <div class=\"latest-prdouct__slider__item\">\r\n");
#nullable restore
#line 100 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                          
                                            top3PopularProduct = (from od in dblIHealth.TOrderDetails.Include(od => od.FProduct).ThenInclude(p => p.FCategory).AsEnumerable()
                                                                  where od.FProduct.FCategoryId == 2
                                                                  group od by new
                                                                  {
                                                                      od.FProductId,
                                                                      od.FProduct.FProductName,
                                                                      od.FProduct.FCoverImage,
                                                                      od.FProduct.FUnitprice
                                                                  }
                                                                      into g
                                                                  select new
                                                                  {
                                                                      Key = g.Key,
                                                                      Count = g.Sum(od => od.FQuantity),
                                                                      Photo = g.Key.FCoverImage,
                                                                      UnitPrice = g.Key.FUnitprice
                                                                  }).OrderByDescending(p => p.Count).Take(3).ToList();

                                            foreach (var item in top3PopularProduct)
                                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                <a");
            BeginWriteAttribute("href", " href=\"", 7590, "\"", 7645, 2);
            WriteAttributeValue("", 7597, "/Shopping/ShowProductDetail/", 7597, 28, true);
#nullable restore
#line 121 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 7625, item.Key.FProductId, 7625, 20, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"latest-product__item\">\r\n                                                    <div class=\"latest-product__item__pic\">\r\n                                                        <img");
            BeginWriteAttribute("src", " src=\"", 7831, "\"", 7871, 2);
            WriteAttributeValue("", 7837, "/img/product/", 7837, 13, true);
#nullable restore
#line 123 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 7850, item.Key.FCoverImage, 7850, 21, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("alt", " alt=\"", 7872, "\"", 7878, 0);
            EndWriteAttribute();
            WriteLiteral(" style=\"width:110px;height:110px\">\r\n                                                    </div>\r\n                                                    <div class=\"latest-product__item__text\">\r\n                                                        <h6>");
#nullable restore
#line 126 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                       Write(item.Key.FProductName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h6>\r\n                                                        <span>");
#nullable restore
#line 127 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                         Write(item.Key.FUnitprice.ToString("C0"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n                                                    </div>\r\n                                                </a>\r\n");
#nullable restore
#line 130 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                            }
                                        

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    </div>\r\n                                    <div class=\"latest-prdouct__slider__item\">\r\n");
#nullable restore
#line 134 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                          
                                            top3PopularProduct = (from od in dblIHealth.TOrderDetails.Include(od => od.FProduct).ThenInclude(p => p.FCategory).AsEnumerable()
                                                                  where od.FProduct.FCategoryId == 3
                                                                  group od by new
                                                                  {
                                                                      od.FProductId,
                                                                      od.FProduct.FProductName,
                                                                      od.FProduct.FCoverImage,
                                                                      od.FProduct.FUnitprice
                                                                  }
                                                                      into g
                                                                  select new
                                                                  {
                                                                      Key = g.Key,
                                                                      Count = g.Sum(od => od.FQuantity),
                                                                      Photo = g.Key.FCoverImage,
                                                                      UnitPrice = g.Key.FUnitprice
                                                                  }).OrderByDescending(p => p.Count).Take(3).ToList();

                                            foreach (var item in top3PopularProduct)
                                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                <a");
            BeginWriteAttribute("href", " href=\"", 10425, "\"", 10480, 2);
            WriteAttributeValue("", 10432, "/Shopping/ShowProductDetail/", 10432, 28, true);
#nullable restore
#line 155 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 10460, item.Key.FProductId, 10460, 20, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"latest-product__item\">\r\n                                                    <div class=\"latest-product__item__pic\">\r\n                                                        <img");
            BeginWriteAttribute("src", " src=\"", 10666, "\"", 10706, 2);
            WriteAttributeValue("", 10672, "/img/product/", 10672, 13, true);
#nullable restore
#line 157 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 10685, item.Key.FCoverImage, 10685, 21, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("alt", " alt=\"", 10707, "\"", 10713, 0);
            EndWriteAttribute();
            WriteLiteral(" style=\"width:110px;height:110px\">\r\n                                                    </div>\r\n                                                    <div class=\"latest-product__item__text\">\r\n                                                        <h6>");
#nullable restore
#line 160 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                       Write(item.Key.FProductName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h6>\r\n                                                        <span>");
#nullable restore
#line 161 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                         Write(item.Key.FUnitprice.ToString("C0"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n                                                    </div>\r\n                                                </a>\r\n");
#nullable restore
#line 164 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                            }
                                        

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    </div>\r\n                                    <div class=\"latest-prdouct__slider__item\">\r\n");
#nullable restore
#line 168 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                          
                                            top3PopularProduct = (from od in dblIHealth.TOrderDetails.Include(od => od.FProduct).ThenInclude(p => p.FCategory).AsEnumerable()
                                                                  where od.FProduct.FCategoryId == 4
                                                                  group od by new
                                                                  {
                                                                      od.FProductId,
                                                                      od.FProduct.FProductName,
                                                                      od.FProduct.FCoverImage,
                                                                      od.FProduct.FUnitprice
                                                                  }
                                                                      into g
                                                                  select new
                                                                  {
                                                                      Key = g.Key,
                                                                      Count = g.Sum(od => od.FQuantity),
                                                                      Photo = g.Key.FCoverImage,
                                                                      UnitPrice = g.Key.FUnitprice
                                                                  }).OrderByDescending(p => p.Count).Take(3).ToList();

                                            foreach (var item in top3PopularProduct)
                                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                <a");
            BeginWriteAttribute("href", " href=\"", 13260, "\"", 13315, 2);
            WriteAttributeValue("", 13267, "/Shopping/ShowProductDetail/", 13267, 28, true);
#nullable restore
#line 189 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 13295, item.Key.FProductId, 13295, 20, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"latest-product__item\">\r\n                                                    <div class=\"latest-product__item__pic\">\r\n                                                        <img");
            BeginWriteAttribute("src", " src=\"", 13501, "\"", 13541, 2);
            WriteAttributeValue("", 13507, "/img/product/", 13507, 13, true);
#nullable restore
#line 191 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 13520, item.Key.FCoverImage, 13520, 21, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("alt", " alt=\"", 13542, "\"", 13548, 0);
            EndWriteAttribute();
            WriteLiteral(" style=\"width:110px;height:110px\">\r\n                                                    </div>\r\n                                                    <div class=\"latest-product__item__text\">\r\n                                                        <h6>");
#nullable restore
#line 194 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                       Write(item.Key.FProductName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h6>\r\n                                                        <span>");
#nullable restore
#line 195 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                         Write(item.Key.FUnitprice.ToString("C0"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n                                                    </div>\r\n                                                </a>\r\n");
#nullable restore
#line 198 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                            }
                                        

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    </div>\r\n                                    <div class=\"latest-prdouct__slider__item\">\r\n");
#nullable restore
#line 202 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                          
                                            top3PopularProduct = (from od in dblIHealth.TOrderDetails.Include(od => od.FProduct).ThenInclude(p => p.FCategory).AsEnumerable()
                                                                  where od.FProduct.FCategoryId == 5
                                                                  group od by new
                                                                  {
                                                                      od.FProductId,
                                                                      od.FProduct.FProductName,
                                                                      od.FProduct.FCoverImage,
                                                                      od.FProduct.FUnitprice
                                                                  }
                                                                      into g
                                                                  select new
                                                                  {
                                                                      Key = g.Key,
                                                                      Count = g.Sum(od => od.FQuantity),
                                                                      Photo = g.Key.FCoverImage,
                                                                      UnitPrice = g.Key.FUnitprice
                                                                  }).OrderByDescending(p => p.Count).Take(3).ToList();

                                            foreach (var item in top3PopularProduct)
                                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                                <a");
            BeginWriteAttribute("href", " href=\"", 16095, "\"", 16150, 2);
            WriteAttributeValue("", 16102, "/Shopping/ShowProductDetail/", 16102, 28, true);
#nullable restore
#line 223 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 16130, item.Key.FProductId, 16130, 20, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"latest-product__item\">\r\n                                                    <div class=\"latest-product__item__pic\">\r\n                                                        <img");
            BeginWriteAttribute("src", " src=\"", 16336, "\"", 16376, 2);
            WriteAttributeValue("", 16342, "/img/product/", 16342, 13, true);
#nullable restore
#line 225 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
WriteAttributeValue("", 16355, item.Key.FCoverImage, 16355, 21, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("alt", " alt=\"", 16377, "\"", 16383, 0);
            EndWriteAttribute();
            WriteLiteral(" style=\"width:110px;height:110px\">\r\n                                                    </div>\r\n                                                    <div class=\"latest-product__item__text\">\r\n                                                        <h6>");
#nullable restore
#line 228 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                       Write(item.Key.FProductName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h6>\r\n                                                        <span>");
#nullable restore
#line 229 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                                         Write(item.Key.FUnitprice.ToString("C0"));

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n                                                    </div>\r\n                                                </a>\r\n");
#nullable restore
#line 232 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                            }
                                        

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class=""col-lg-9 col-md-7"">
                <div class=""hero__search"">
                    <button type=""button"" class=""hero__search__form site-btn sort"" data-sort="""" style=""width:20%"">按價格排序</button>
                    <div class=""hero__search__form "" style=""width:57.3%"" id=""search"">
                        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "17cda22f2b6ba3f7298751146d2739104c21b11c36455", async() => {
                WriteLiteral(@"
                            <input style=""width:392.1px;height:46px"" id=""txtKeyword"" name=""txtKeyword"" type=""text"" placeholder=""請輸入關鍵字"" autocomplete=""off"">
                            <button type=""button"" class=""site-btn"" id=""btnSearch"" style=""float:right"">搜尋</button>
                        ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Method = (string)__tagHelperAttribute_3.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_3);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
                    </div>
                </div>
                
                <div style=""margin-bottom:30px"">
                    <span id=""spanCount""></span>
                </div>
                <div class=""row reveal_b2"" id=""showProduct"">

                </div>
                <div class=""product__pagination"">


                </div>

            </div>
        </div>
    </div>

</section>

");
            DefineSection("Scripts", async() => {
                WriteLiteral("\r\n\r\n    <script>\r\n");
                WriteLiteral("\r\n");
#nullable restore
#line 281 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
      
        string LoginbuttonValue = "登入";
        int loginId = 0;
        TMember loginMember = null;

        if (Context.Session.Keys.Contains(CDictionary.SK_Logined_User))
        {
            string logJson = Context.Session.GetString(CDictionary.SK_Logined_User);
            loginMember = JsonSerializer.Deserialize<TMember>(logJson);
            LoginbuttonValue = loginMember.FMemberName;
            loginId = loginMember.FMemberId;
        };
    

#line default
#line hidden
#nullable disable
                WriteLiteral(@"
        let option = {
            categoryID: 0,
            sort: """",
            url: """",
            page: 1,
            txtKeyword: """"
        }
        
        //js轉換數字為千分位型態方法
        function toCurrency(num) {
            var parts = num.toString().split('.');
            parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            return parts.join('.');
        }

        //顯示商品
        AllProducts(option);
        function AllProducts(option) {
            let url = """);
#nullable restore
#line 313 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                  Write(Url.Content("~/Shopping/GetProduct/"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""" + (option.categoryID == 0 ? """" : option.categoryID);
            $.post(url,option, function (datas) {
                let htmlShowProduct = """";
                $.each(datas, function (idx, product) {
                    product.fUnitprice = ""NT$"" + toCurrency(product.fUnitprice);
                    htmlShowProduct += `<div class=""col-lg-4 col-md-6 col-sm-6 productitem "" ><div class=""reveal_b2"" id=""header"" style=""cursor:pointer;"">
                                <div class=""product__item"">
                                <div class=""product__item__pic set-bg showProductDetail"" data-id=""${product.fProductId}"" data-setbg=""/img/product/${product.fCoverImage}"" style=""background-image: url(&quot;/img/product/${product.fCoverImage}&quot;);"">
                                    <ul class=""product__item__pic__hover"">                                      
                                        <li><a href=""#"" data-id=""${product.fProductId}"" class=""addToTrack""><i class=""fa fa-heart""></i></a></li>
        ");
                WriteLiteral(@"                                <li><a href=""#"" data-id=""${product.fProductId}"" class=""addToCart""><i class=""fa fa-shopping-cart""></i></a></li>
                                    </ul>
                                </div>
                                <div class=""product__item__text"">
                                    <h6 class=""showProductDetail"" data-id=""${product.fProductId}"">${product.fProductName}</h6>
                                    <h5 class=""showProductDetail"" data-id=""${product.fProductId}"">${product.fUnitprice}</h5>
                                </div>
                            </div>
                            </div></div>`
                })
                $(""#showProduct"").html(htmlShowProduct);

                //頁碼動態生成，一開始只顯示前9個商品
                $("".productitem"").hide();
                let XNum = 0;
                let YNum = 9;
                $("".productitem"").slice(XNum, YNum).show();
                let productCount = $("".productitem"").length;
           ");
                WriteLiteral(@"     if (YNum > productCount) {
                    YNum = productCount;
                }
                $(""#spanCount"").text(`共${productCount}筆商品，現在顯示第${XNum+1}~${YNum}筆商品。`);
                let pageNum = """";
                let page = productCount / 9;
                if (page % 9 != 0) {
                    page = page + 1;
                }
                for (let i = 1; i < page; i++) {
                    if (i == 1) {
                        pageNum = `<a href=""#"" class=""pageSelect selectedPage"">${i}</a>`;
                    }
                    else {
                        pageNum += `<a href=""#"" class=""pageSelect"">${i}</a>`;
                    }
                }
                $("".product__pagination"").html(pageNum);

                //點頁數會跳至相對頁數產品
                $("".pageSelect"").click(function () {
                    let newPageNum = $(this).text();
                    $(this).addClass(""selectedPage"").siblings().removeClass(""selectedPage"");
                    $(""");
                WriteLiteral(@".productitem"").hide();
                    XNum = (newPageNum - 1)*9;
                    YNum = newPageNum * 9;
                    if (YNum > productCount) {
                        YNum = productCount;
                    }
                    $("".productitem"").slice(XNum, YNum).show();
                    $(""#spanCount"").text(`共查${productCount}筆商品，現在顯示第${XNum + 1}~${YNum}筆商品。`);
                    $('html,body').animate({ scrollTop: 10 }, 'slow');
                })

                if ($("".productitem"").length == 0) {
                    SwalGreen.fire({
                    title: '查無搜尋結果',
                    text: '請重新搜尋或選擇篩選條件。',
                    icon: 'error',
                        confirmButtonText: '返回商城主頁',
                    showCloseButton: true
                }).then((result) => {
                    if (result.isConfirmed)
                        $(location).prop(""href"", """);
#nullable restore
#line 384 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                             Write(Url.Content("~/Shopping/ShowShoppingMall"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""");
                })
                }
            })
        }

        //點選圖片進showPrductDetail，讓心心/購物車正常運作
        $(""#showProduct"").delegate("".addToTrack"", ""mouseover"",function(){
            $("".product__item__pic"").removeClass(""showProductDetail"");
        })
        $(""#showProduct"").delegate("".addToTrack"", ""mouseleave"", function () {
            $("".product__item__pic"").addClass(""showProductDetail"");
        })
        $(""#showProduct"").delegate("".addToCart"", ""mouseover"", function () {
            $("".product__item__pic"").removeClass(""showProductDetail"");
        })
        $(""#showProduct"").delegate("".addToCart"", ""mouseleave"", function () {
            $("".product__item__pic"").addClass(""showProductDetail"");
        })


        //按價格排序
        //class改變箭頭方向
        //以data-sort的值傳去後端做IF/ELSE判斷
        $("".sort"").on(""click"", sorting);
        function sorting() {
            //以data-sort當flag
            let dataSort = $("".sort"").attr(""data-sort"");
            //每次執行functi");
                WriteLiteral(@"on清空sort以外class
            $("".sort"").removeClass(""sort-asc sort-desc"");
            if (dataSort == null || dataSort == """") {
                dataSort = ""asc"";
                $("".sort"").addClass(""sort-asc"");
                $("".sort"").attr(""data-sort"", dataSort);
            }
            else if (dataSort == ""desc"") {
                dataSort = ""asc"";//改變旗標
                $("".sort"").addClass(""sort-asc"");
                $("".sort"").attr(""data-sort"", dataSort);
            }
            else {
                dataSort = ""desc"";
                $("".sort"").addClass(""sort-desc"");
                $("".sort"").attr(""data-sort"", dataSort);
            }
            option.sort = dataSort;
            AllProducts(option);
        }

        //以類別分類各產品
        $(""#showByCatergory"").find("".categoryItem"").click(function (event) {
            event.preventDefault();
            id = $(this).attr(""data-id"");
            console.log(this);
            //清空txtKeyword，斷除2姐關係
            option.tx");
                WriteLiteral(@"tKeyword = """";
            $(""#txtKeyword"").val("""");
            option.categoryID = id;
            AllProducts(option);
        })
        $("".categoryItem"").click(function () {
            $("".categoryItem"").removeClass(""selectedCategory"");
            $(this).addClass(""selectedCategory"");
        })

         //以輸入文字搜產品
        $(""#btnSearch"").click(function () {
            let keyword = $(""#txtKeyword"").val();
            //清空categoryID，斷除2姐關係
            option.categoryID = 0;
            option.txtKeyword = keyword;
            $("".categoryItem"").removeClass(""selectedCategory"");
            AllProducts(option);
            if (keyword == """") {
                SwalGreen.fire({
                    title: ""請輸入搜尋資料"",
                    text: false,
                    icon: 'question',
                    confirmButtonText: '確定',
                    showCloseButton: true
                })
            }
        })

        showProduct();
        //在商城主頁執行所有function
        ");
                WriteLiteral("function showProduct() {\r\n            option.url = \"");
#nullable restore
#line 471 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                     Write(Url.Content("~/Shopping/ShowProduct"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""";
            AllProducts(option);
            //按品名會彈出相對應商品明細
            $(""#showProduct"").delegate("".showProductDetail"", ""click"", function () {
            id = $(this).attr(""data-id"");
            location.href = `/Shopping/ShowProductDetail/${id}`;
            showProductDetail(id);
            })
            async function showProductDetail(id) {
            var data = {};
            data.FProductId = id;
            data.FProductName = 1;
            $.ajax({ type: ""POST"", url: """);
#nullable restore
#line 483 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                    Write(Url.Action("ShowProductDetail"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""",data:data });
            }

            //按心心會加入追蹤清單
            $(""#showProduct"").delegate("".addToTrack"", ""click"", function (event) {
                event.preventDefault();
                id = $(this).attr(""data-id"");
                console.log(");
#nullable restore
#line 490 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                       Write(loginId);

#line default
#line hidden
#nullable disable
                WriteLiteral(");\r\n                if (");
#nullable restore
#line 491 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
               Write(loginId);

#line default
#line hidden
#nullable disable
                WriteLiteral("== 0) {\r\n                    pleaseLogin();\r\n                }\r\n                else {\r\n                    addTrack(id);                            \r\n                 }\r\n\r\n            })\r\n            async function addTrack(id) {\r\n                url = \"");
#nullable restore
#line 500 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                  Write(Url.Content("~/Shopping/AddToTrack/"));

#line default
#line hidden
#nullable disable
                WriteLiteral(@""" + id;
                let response = await fetch(url);
                let datas = await response.json();
                newTrackCount = datas;
                console.log(trackCount);
                console.log(newTrackCount);
                //變更右上追蹤清單顯示數量
                $(""#fa-heart"").children(""span"").text(datas);
                $(""#fa-heart"").children(""span"").show();
                if (trackCount == newTrackCount) {
                    SwalGreen.fire({
                        title: '產品已在追蹤清單中',
                        text: false,
                        icon: 'warning',
                        confirmButtonText: '確認',
                        showCloseButton: true
                    })
                }
                else {
                    trackCount = newTrackCount;
                    SwalGreen.fire({
                        title: '已成功加入追蹤清單',
                        text: false,
                        icon: 'success',
                        confirmButtonText: '");
                WriteLiteral(@"確認',
                        showCloseButton: true
                    })
                }
            }

            //按購物車會加入到購物車
            $(""#showProduct"").delegate("".addToCart"", ""click"", function (event) {
            event.preventDefault();
            id = $(this).attr(""data-id"");
            if (");
#nullable restore
#line 534 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
           Write(loginId);

#line default
#line hidden
#nullable disable
                WriteLiteral(@" == 0) {
            pleaseLogin();
            }
            else {
                addCart(id);
                $(""#fa-cart"").children(""span"").show();
            SwalGreen.fire({
                    title: '已成功加入購物車',
                    text: false,
                    icon: 'success',
                        confirmButtonText: '確認',
                    showCloseButton: true
                })
            }

            })
            async function addCart(id) {
            //傳值回AddToCartViewModel
            var data = {};
            data.txtFid = id;
            data.txtCount = 1;
            data.discountValue = 0;
            data.discountID = 10;
            //變更右上購物車顯示數量
            await $.ajax({ type: ""POST"", url: """);
#nullable restore
#line 558 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
                                          Write(Url.Action("ShowProductDetail"));

#line default
#line hidden
#nullable disable
                WriteLiteral("\", data: data });\r\n            url = \"");
#nullable restore
#line 559 "C:\ispan\0808\prjIHealth\Views\Shopping\ShowShoppingMall.cshtml"
              Write(Url.Content("~/Shopping/ShowCartCount/"));

#line default
#line hidden
#nullable disable
                WriteLiteral("\"\r\n            let response = await fetch(url);\r\n            let datas = await response.json();\r\n            await $(\"#fa-cart\").children(\"span\").text(datas);\r\n            }         \r\n        }\r\n    </script>\r\n");
            }
            );
            WriteLiteral("\r\n");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<IEnumerable<prjIHealth.ViewModels.CProductViewModel>> Html { get; private set; }
    }
}
#pragma warning restore 1591
