@model prjIHealth.Models.TMember

@{
    ViewData["Title"] = "Create";
    Layout = "~/Areas/Admin/Admin_Layout.cshtml";

}
@section Styles{
    <style>
        #title {
            font-weight: 800;
            color: #599e32;
            margin-left: 20vw;
            margin-right: 20vw;
        }
        /*        <h2 id="title">管理頁Demo</h2>*/
    </style>
}
<h2 id="title">會員資料新增</h2>
<hr/>
@*<h4>TMember</h4>*@
<hr />
<div class="row justify-content-center ">
    <div class="col-md-4 border border-primary mt-md-8">
        <form asp-action="Create" id="registerForm">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group row justify-content-center">
                <div class="col-md-3 ">
                    <label asp-for="FMemberName" class="control-label" ></label>
                </div>
                <div class="col-md-7">
                    <input asp-for="FMemberName" class="form-control" autocomplete="off"/>
                </div>
                <span asp-validation-for="FMemberName" class="text-danger"></span>
            </div>
            <div class="form-group row justify-content-center">
                @*<div class="col-md-3 ">
                    <label asp-for="FPassword" class="control-label"></label>
                </div>*@
                <div class="col-md-7">
                    <input type="hidden" asp-for="FPassword" class="form-control" value="1qaz@WSX" autocomplete="off"/>
                </div>
                <span asp-validation-for="FPassword" class="text-danger"></span>
            </div>
            <div class="form-group row justify-content-center">
                <div class="col-md-3 ">
                    <label asp-for="FBirthday" class="control-label"></label>
                </div>
                <div class="col-md-7">
                    <input type="date" asp-for="FBirthday" class="form-control" autocomplete="off"/>
                </div>
                <span asp-validation-for="FBirthday" class="text-danger"></span>
            </div>
            <div class="form-group row justify-content-center">
                <div class="col-md-3 ">
                    <label asp-for="FGender" class="control-label"></label>
                </div>
                <div class="col-md-7">
                    <input asp-for="FGender" class="form-control" autocomplete="off"/>
                </div>
                <span asp-validation-for="FGender" class="text-danger"></span>
            </div>
            <div class="form-group row justify-content-center">
                @*<div class="col-md-3 ">
                    <label asp-for="FPicturePath" class="control-label"></label>
                </div>*@
                <div class="col-md-7">
                    <input type="hidden" asp-for="FPicturePath" class="form-control" autocomplete="off"/>
                </div>
                <span asp-validation-for="FPicturePath" class="text-danger"></span>

            </div>
            <div class="form-group row justify-content-center">
                <div class="col-md-3 ">
                    <label asp-for="FUserName" class="control-label"></label>
                </div>
                <div class="col-md-7">
                    <input id='inpRegisterUserName' asp-for="FUserName" class="form-control" autocomplete="off"/>
                </div>
                <span id="spanRegUsername" asp-validation-for="FUserName" class="text-danger"></span>
            </div>
            <div class="form-group row justify-content-center">
                <div class="col-md-3 ">
                    <label asp-for="FAddress" class="control-label"></label>
                </div>
                <div class="col-md-7">
                    <input asp-for="FAddress" class="form-control" autocomplete="off"/>
                </div>
                <span asp-validation-for="FAddress" class="text-danger"></span>
            </div>
            <div class="form-group row justify-content-center">
                <div class="col-md-3 ">
                    <label asp-for="FPhone" class="control-label"></label>
                </div>
                <div class="col-md-7">
                    <input asp-for="FPhone" class="form-control" autocomplete="off"/>
                </div>
                <span asp-validation-for="FPhone" class="text-danger"></span>
            </div>
            <div class="form-group row justify-content-center">
                <div class="col-md-3 ">
                    <label asp-for="FEmail" class="control-label" ></label>
                </div>
                <div class="col-md-7">
                    <input id="inpRegisterEmail" asp-for="FEmail" class="form-control" autocomplete="off"/>
                </div>
                <span id="spanRegEmail" asp-validation-for="FEmail" class="text-danger"></span>
            </div>
            <div class="form-group row justify-content-center">
                @*<div class="col-md-3 ">
                    <label  asp-for="FRegisterDate" class="control-label" ></label>
                </div>*@
                <div class="col-md-7">
                    <input type="hidden" asp-for="FRegisterDate" class="form-control" autocomplete="off" id="fRegisterDate"/>
                </div>
                <span asp-validation-for="FRegisterDate" class="text-danger"></span>

            </div>
            <div class="form-group row justify-content-center">
                <div class="col-md-3 ">
                    <label asp-for="FAuthorityId" class="control-label"></label>
                </div>
                <div class="col-md-7">
                    <select asp-for="FAuthorityId" class="form-control" asp-items="ViewBag.FAuthorityId"></select>
                </div>
            </div>
            <div class="form-group row justify-content-center">
                <div class="col-md-3 ">
                    <label asp-for="FDisabled" class="control-label"></label>
                </div>
                <div class="col-md-7">
                    <input asp-for="FDisabled" class="form-control" autocomplete="off"/>
                </div>
                <span asp-validation-for="FDisabled" class="text-danger"></span>

            </div>
            <div class="form-group row justify-content-center">


                <div class="col-md-3 ">
                    <label asp-for="FRemarks" class="control-label"></label>
                </div>
                <div class="col-md-7">
                    <input asp-for="FRemarks" class="form-control" autocomplete="off" />
                </div>
                <span asp-validation-for="FRemarks" class="text-danger"></span>

            </div>

            <div class="form-group row justify-content-center">
                <div class="col-md-3 ">
                    <input type="submit" value="送出" class="btn btn-primary" />
                </div>
                <div class="col-md-7">
                    <a asp-action="Index" class="btn btn-success">回會員資料管理列表</a>

                </div>
            </div>
        </form>
    </div>
</div>


@section Scripts {
<script>        //==========================註冊取得系統日期========================================
    var registerD = new Date();
    var year = registerD.getFullYear().toString();
    var month = (registerD.getMonth() + 101).toString().substring(1);
    var day = (registerD.getDate() + 100).toString().substring(1);
    var str = year + month + day;
    $("#fRegisterDate").val(str);

    $('#inpRegisterUserName').on('blur', () =>
    {
        event.preventDefault();
        var loginVal = $('#inpRegisterUserName').val();
        if (loginVal == "")
        {
            $('#spanRegUsername').text('帳號不得空白');
        } else
        {
            var formData = new FormData(document.querySelector("#registerForm"));
            fetch("/Member/getUserName", {
                body: formData,
                method: "Post"
            }).then(Response => Response.text()).then(data =>
            {
             
                if (data == "false")
                {
                    $('#spanRegUsername').text('此帳號可使用');

                } else
                {
                    $('#spanRegUsername').text('此帳號已有人使用, 請換個帳號');
                }
            });
        };
    });
    $('#inpRegisterEmail').on('blur', () =>
    {
        ///^[_a-zA-Z1-9]+(\.[A-Za-z0-9]*)*@@[A-Za-z0-9]+\\.[A-Za-z0-9]+(\\.[A-Za-z0-9]*)*$
        var regEx = /^[a-zA-Z0-9_.]+@@[a-zA-Z0-9]+.[a-zA-Z]{2,3}[.] {0,1}[a-zA-Z]+$/;
        var resultReg = regEx.test($('#inpRegisterEmail').val());
        if (resultReg) { $('#spanRegEmail').text("格式符合要求,請繼續"); }
        else
        {
            $('#spanRegEmail').text("格式不符,請重新輸入");
        };
    });
</script>
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
